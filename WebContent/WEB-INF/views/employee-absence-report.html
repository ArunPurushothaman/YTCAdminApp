<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="description" content="Program Details Form Wizard">
      <meta name="author" content="Yokohama">
      <meta name="keyword" content="YMPACT">
      <title>YTMM</title>
     <!-- Bootstrap core CSS -->
    <link href="resources/css/bootstrap.min.css" rel="stylesheet">
    <link href="resources/css/bootstrap-reset.css" rel="stylesheet">
    <!--external css-->
    <link href="resources/assets/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
     <!--dynamic table-->
    <link href="resources/assets/advanced-datatable/media/css/demo_page.css" rel="stylesheet" />
    <link href="resources/assets/advanced-datatable/media/css/demo_table.css" rel="stylesheet" />
    <link rel="stylesheet" href="resources/assets/data-tables/DT_bootstrap.css" />

   <!--select 2-->
    <link rel="stylesheet" type="text/css" href="resources/assets/select2/css/select2.min.css"/>

      <!--right slidebar-->
      <link href="resources/css/slidebars.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="resources/css/style.css" rel="stylesheet">
    <link href="resources/css/style-responsive.css" rel="stylesheet" />
    <link href="resources/css/status_icons.css" rel="stylesheet">


    <!-- HTML5 shim and Respond.js IE8 support of HTML5 tooltipss and media queries -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
      <script src="js/respond.min.js"></script>
    <![endif]-->
     <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.4/js/jquery.dataTables.min.js"></script>
	<!-- <link rel="stylesheet" href="https://cdn.datatables.net/1.10.4/css/jquery.dataTables.min.css"> -->
	
 <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
	 <link rel="stylesheet" href="https://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.3.1/css/buttons.dataTables.min.css">
	
	<link rel="stylesheet" href="resources/css/breadcrumbs.css">
	<!-- <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script> -->
	<style>
		td,th {
		    white-space:nowrap;
		}
		th{
				text-align: center;
		}
		label.error {
    display: inline;
    margin: 5px 0;
    color: #B94A48;
    font-weight: 400;
}
	</style>
  <script type="text/javascript">
   //Export to Excel 
   function tableToExcel(tableId) {
    var tab_text="<table border='2px'><tr>";
    var textRange; var j=0;
    var fileName = "";
      tab = document.getElementById(tableId); // id of table
      
      if(tableId=="absence_histroy"){

        fileName="ABSENCE_REPORT_"+$("#loginUserName").html()+"_"+new Date().toLocaleString();
        
      }

      for(j = 0 ; j < tab.rows.length ; j++) {  
        var table_cells = tab.rows[j].getElementsByTagName('td');  
        for (var i = 0; i < table_cells.length; i++) { 
          var cell = table_cells[i];
          /* if(  i==0) {
            if(cell.innerHTML!='0') {
            	cell.setAttribute("style", 'mso-number-format:"\@"');
            }
          }
          
          if(  i==6) {              
              	cell.setAttribute("style", 'width:"320px"');
            } */
          
        }
        var text="";
       
        
        /* Code added to change background color of failed records in excel */
        /*  if((j!=0)&&(tab.rows[j].getElementsByTagName('td').length>1)){
	        if(tab.rows[j].getElementsByTagName('td')[7].innerHTML=="Failed"){  
	        	tab.rows[j].innerHTML=tab.rows[j].innerHTML.replace(/<td/g,'<td style="background-color: #eec9c9"');
	        	tab.rows[j].getElementsByTagName('td')[0].setAttribute("style", 'mso-number-format:"\@";background-color: "#eec9c9"');
	        }
        }  */
        text=tab.rows[j].innerHTML;
        tab_text=tab_text+text+"</tr>";
      }
      tab_text=tab_text+"</table>";
      tab_text= tab_text.replace(/<a[^>]*>|<\/a>/g, "");//remove if u want links in your table
      tab_text= tab_text.replace(/<img[^>]*>/gi,""); // remove if u want images in your table
      tab_text= tab_text.replace(/<input[^>]*>|<\/input>/gi, ""); // reomves input params
      tab_text= tab_text.replace(/(width: )\d+px;/g, "background-color: #87AFC6");
      if (navigator.userAgent.indexOf('Trident')>0 || navigator.userAgent.indexOf('Edge')>0) {
        var blobObject = new Blob([tab_text]); 
        window.navigator.msSaveOrOpenBlob(blobObject, fileName+'.xls');
      }else {
        var a = document.createElement('a');
       /*  var data_type = 'data:application/vnd.ms-excel';
        a.href = data_type + ', ' + encodeURIComponent(tab_text); */
        var blob = new Blob([tab_text], {type: 'text/xls'});
        a.href =window.URL.createObjectURL(blob);
        a.download =  fileName+'.xls';
        document.body.appendChild(a);
        a.click();
        document.body.appendChild(a);   
      }

    }
  </script>	
    
   </head>
   <body onload="">
      <section id="container" class="">
         <!--header start-->
         <header class="header dark-bg">
            <div class="sidebar-toggle-box">
               <i class="fa fa-bars"></i>
            </div>
            <!--logo start-->
            <a href="" class="logo"><img src="resources/img/yokohama-logo.svg" width="132" height="52"></a>
            <!--logo end-->
            <div class="top-nav ">
               <ul class="nav pull-right top-menu">
                  <!-- user login dropdown start-->
                  <li class="dropdown">
                     <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                     <span class="username" id="loginUserName">John Doe</span>
                     <b class="caret"></b>
                     </a>
                     <ul class="dropdown-menu extended logout">
                        <div class="log-arrow-up"></div>
                        <li><a href="logout"><i class="fa fa-key"></i> Log Out</a></li>
                     </ul>
                  </li>
                  <!-- user login dropdown end -->
               </ul>
               <center><h3 style="color:white;font-size: 20px;"></h3></center>
            </div>
         </header>
         <!--header end-->
         <!--sidebar start-->
		<aside>
			<div id="sidebar"  class="nav-collapse ">
				<!-- sidebar menu start-->
				<ul class="sidebar-menu" id="nav-accordion">
				  <li>
					  <a class="" href="processLogin">
						  <i class="fa fa-tasks"></i>
						  <span>Employee Report Off Form</span>
					  </a>
				  </li>				  
				</ul>
				<!-- sidebar menu end-->
			</div>
		</aside>
         <!--sidebar end-->
         <!--main content start-->
         <section id="main-content">
            <section class="wrapper site-min-height">
               <!-- page start-->
                <div id="tirekey-parent-div" class="row">
                  <div class="col-lg-12">
                     <!--progress bar start-->
                     <section class="panel">
                        <header class="panel-heading">
                           <h3>YTMM Employee Call-Off Report</h3>
                        </header>
                        <div class="panel-body">
                              
                          <!-- <h4 class="tableHeader">Absent Entry</h4>  -->
                          
                          
                          <div class="clearfix">
										<div class="form-group clearfix">
											
											
										
										<div class="col-lg-12">
                                             <div class="col-lg-4 col-md-4 col-sm-4" >
                                             <br>
                                                <label class="control-label" for="manager">Manager/Supervisor</label>
                                                <select class="form-control input-sm m-bot15 required js-example-basic-multiple" id="manager" name="manager" multiple="multiple" >
													<option></option>

                                                </select>
                                             </div>
											 <div class="col-lg-4 col-md-4 col-sm-4" >
											  <br>
                                                <label class="control-label" for="shiftAssignment">Shift Assignment</label>
                                                <select class="form-control input-sm m-bot15 required js-example-basic-multiple" id="shiftAssignment" name="shiftAssignment" multiple="multiple">
													<option></option>

                                                </select>
                                             </div>
											 <div class="col-lg-4 col-md-4 col-sm-4" >
											  <br>
                                                <label class="control-label" for="department">Department Assigned</label>
                                                <select class="form-control input-sm m-bot15 required js-example-basic-multiple" id="department" name="department" multiple="multiple">
													<option></option>
													
                                                </select>
                                             </div>
										</div>
										
										<div class="col-lg-12">
										<div class="col-lg-4 col-md-4 col-sm-4" >
											  <br>
                                                <label class="control-label" for="department">Employee Name</label>
                                                <select class="form-control input-sm m-bot15 required js-example-basic-multiple" id="employee" name="employee" multiple="multiple">
													<option></option>

                                                </select>
                                             </div>
                                             <div class="col-lg-4 col-md-4 col-sm-4" >
                                             <br>
                                                <label class="control-label" for="fromdate">Absence Date From</label>
                                                <div class="input-group input-medium"
																	data-date-format="mm/dd/yy">
																	<input type="text" class="form-control"  id="from"
																		name="from" placeholder="Begin Date" >
																		<span class="input-group-addon"><img id="calImgfrom" src="resources/img/email-img/calendar.png" width="15" onclick="openCalendar(this);"></span>																		
																		<!-- <span class="input-group-addon" for="to">To</span>  <input
																		type="text" class="form-control"  id="to"
																		name="to" placeholder="End Date" >
																		<span class="input-group-addon"><img id="calImgto" src="resources/img/email-img/calendar.png" width="15" onclick="openCalendar(this);"></span>	-->
																</div>
																<label for=from generated="true" class="error"></label>
                                             </div>
											 <div class="col-lg-4 col-md-4 col-sm-4" >
											  <br>
                                                <label class="control-label" for="to1">Absence Date To</label>
                                                 <div class="input-group input-medium"
																	data-date-format="mm/dd/yy">
																	<!--<input type="text" class="form-control"  id="from"
																		name="from" placeholder="Begin Date" >
																		<span class="input-group-addon"><img id="calImgfrom" src="resources/img/email-img/calendar.png" width="15" onclick="openCalendar(this);"></span>																		
																		 <span class="input-group-addon" for="to">To</span> --> <input
																		type="text" class="form-control"  id="to"
																		name="to" placeholder="End Date" >
																		<span class="input-group-addon"><img id="calImgto" src="resources/img/email-img/calendar.png" width="15" onclick="openCalendar(this);"></span>	
																</div>
																<label for=to generated="true" class="error"></label>
                                             </div>
											 
										</div>
										
										<div class="col-lg-12">
										<br><br>
                                             <div class="col-lg-4 col-md-4 col-sm-4">                                                                                         
												<a href="#" id="run_report" onclick="runReport();"><button class="btn btn-default"> Run Report</button></a>
                                             </div>
                                             

											           
										</div>
											<div class="btn-group pull-right">
												<div class="btn-group">
													<a href="#" class="m-bot15">
														<button class="btn btn-default"
															onclick="tableToExcel('absence_histroy')">
															<i class="fa fa-arrow-down"></i> Export To Excel
														</button>
													</a>
												</div>
											</div>
										</div>
									</div>
                          
                          <div id="absence_histroy_wrap" class="table-responsive">
                                 
                           <div id="absence_histroy_content" class="adv-table">
                            		
                          <table class="table table-striped table-hover table-bordered" id="absence_histroy">
                             <thead>

                              <tr class="rowvis" style="background-color: #cacbce;">
                                <th>Action</th>
                                <th>Id</th>
                                <th>Employee Name</th>
                                <th>Manager Name</th>
                                <th>Department Code</th>
								<th>Department Desc</th>					
                                <th>Shift Name</th>
                                <th>Phone No</th>
                                <th>Time Of Call</th>  
                                <th>Absence Date</th>
                                <th>Absence Days</th>
                                <th>Absence Reason</th>                                
                                <th>Sick Reason</th>
                                <th>Comments </th>	
                                <th>Call Taken By</th>	
                                <th>Call Taken Date</th>	
                                <th>Extn</th>	
                                <th>Call Taken Time</th>							
                                                             
									
                              </tr>
                               </thead>
                             
                              <tbody>
                                                       
                              </tbody>
                          </table>
                      </div>
                      </div>
										
																			
                   <div class="col-lg-12">
					<div class="modal fade" id="myModal5" tabindex="-1"
					role="dialog" aria-labelledby="myModalLabel"
					aria-hidden="true" data-backdrop="static"
					data-keyboard="false">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button id="program-error-modal-close" type="button"
									class="close" data-dismiss="modal"
									aria-hidden="true">&times;</button>
								<h4 class="modal-title">Error / Warning (s)</h4>
							</div>
							<div class="modal-body">
								<!-- <div class="space15">&nbsp;</div> -->
								<div class="text-center">
									<span id="errorMessageModal"></span>
								</div>
								<!-- <div class="space15"></div> -->
							</div>
							<div class="modal-footer">
								<button class="btn btn-info" type="button"
									id="program-error-modal-ok" data-dismiss="modal">
									<i class="fa fa-save"></i>&nbsp;&nbsp;OK
								</button>
							</div>
						</div>
					</div>
				</div>
				
				<div class="modal fade" id="myModal" tabindex="-1"
					role="dialog" aria-labelledby="myModalLabel"
					aria-hidden="true" data-backdrop="static"
					data-keyboard="false">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button id="program-submit-modal-close"
									type="button" class="close" data-dismiss="modal"
									aria-hidden="true">&times;</button>
								<h4 class="modal-title">Delete Confirmation</h4>
							</div>
							<div class="modal-body">
								<div class="space15">&nbsp;</div>
								<div class="text-center">Are you sure you want
									to delete? If yes, click the OK button. If No, click the "Cancel" button below.</div>
								<div class="space15"></div>
							</div>
							<div class="modal-footer">
								<button id="program-submit-modal-cancel"
									data-dismiss="modal" class="btn btn-default"
									type="button">Cancel</button>
								<a href="#" onclick="deleteAbsenceRecord();"
									onkeypress="if(event.keyCode==32||event.keyCode==13){deleteAbsenceRecord();};">
									<button id="program-submit-modal-ok"
										class="btn btn-info" type="button">
										<i class="fa fa-save"></i>&nbsp;&nbsp;OK
									</button>
								</a>
							</div>
						</div>
					</div>
				</div>
				
				<div class="modal fade" id="myModal2" tabindex="-1"
                  role="dialog" aria-labelledby="myModalLabel"
                  aria-hidden="true">
                  <div class="modal-dialog">
                     <div class="modal-content" style="border: thin solid grey">
                        <div class="modal-header">
                           <button id="program-confirmation-modal-close"
                              type="button" class="close" data-dismiss="modal"
                              aria-hidden="true">&times;</button>
                           <h4 class="modal-title">Confirmation</h4>
                        </div>
                        <div class="modal-body">
                           <!-- <div class="space15">&nbsp;</div> -->
                           <div class="text-center">
                              <span id="confirmMessage"></span>
                           </div>
                           <!-- <div class="space15"></div> -->
                        </div>
                        <div class="modal-footer">
                          <a href="#" <button class="btn btn-info" type="button"
                              id="program-confirmation-modal-ok"
                              data-toggle="modal" href="#myModal2">
                              <i class="fa fa-save"></i>&nbsp;&nbsp;OK
                           </button></a>
                        </div>
                     </div>
                  </div>
                </div>  
				
                                        <div class="row">
                                            <div class="space15 clearfix"></div>
                                  

      <!-- END Review / Confirm Section -->
      </div>
        </div>
      </section><!-- end panel section -->
      </div>
      </div>
      <!-- page end-->
      </section><!-- end wrapper site-min-height -->
      </section><!-- end #maincontent -->
      <!--main content end-->
          
      <!--footer start-->
      <footer class="site-footer">
         <div class="text-center">
            2017 &copy; Yokohama Tire Corporation. All rights reserved. The Yokohama Rubber Company Limited
            <a href="#" class="go-top">
            <i class="fa fa-angle-up"></i>
            </a>
         </div>
      </footer>
      <!--footer end-->
      </section>
      <!-- END section id="container" FIRST section after opening body tag  -->
       
     <!-- js placed at the end of the document so the pages load faster -->
   <!--  <script src="js/jquery.js"></script> -->
    <script src="resources/js/jquery-ui-1.9.2.custom.min.js"></script>
    <script src="resources/js/jquery-migrate-1.2.1.min.js"></script>
    <script src="resources/js/bootstrap.min.js"></script>
    <script class="include" type="text/javascript" src="resources/js/jquery.dcjqaccordion.2.7.js"></script>
    <script src="resources/js/jquery.scrollTo.min.js"></script>
    <script src="resources/js/jquery.nicescroll.js" type="text/javascript"></script>
    <script type="text/javascript" src="resources/assets/data-tables/jquery.dataTables.js"></script>
    <script type="text/javascript" src="resources/assets/data-tables/DT_bootstrap.js"></script>
    <script src="resources/js/respond.min.js" ></script>
    <!--select2-->
    <script type="text/javascript" src="resources/assets/select2/js/select2.min.js"></script>
    <!-- time out -->
    <script src="resources/js/jquery.userTimeout.js"></script>
    <!--right slidebar-->
    <script src="resources/js/slidebars.min.js"></script>
    <!--dynamic table initialization -->
    <script src="resources/js/dynamic_table_init.js"></script>
    <!--common script for all pages-->
    <script src="resources/js/common-scripts.js"></script>
      
	

      <script type="text/javascript">
      var isHR=false;
      var abId="";	
      $(document).ready(function () {
   	 $.ajax({ 
        	type: "POST",
        	//async:false,
        	dataType: "json",
       		url: '/YTMM/v1/getEmployeeAbsenceReport',
			contentType: 'application/json',
			data: '{"manager":[""],"shift":[""],"department":[""],"employee":[""],"startDate":"","endDate":""}',
        	success: function(response){
        		loadDatatable(response.data);
        		if(isHR){
        			table.column( 0 ).visible( true );
        		}
        	},
        	 error: function(XMLHttpRequest, textStatus, errorThrown) { 
					//message = "<strong> Error :</strong> " + errorThrown + "<br><strong>Message :</strong> " + XMLHttpRequest.responseText;
					message ="An error occured while processing your request, Please contact administrator";
					$("#errorMessageModal").html(message);
					$('#myModal5').modal('toggle');                    	
				},
        	failure: function(response){
        		alert("Wrongly done");
        	}
    	}); 
    	  
   	 
   	$('#absence_histroy').on('draw.dt', function () {

        setTimeout(function() {
       	 $("#absence_histroy_wrap").height(($("#absence_histroy_content").height()+1));
       	}, 0);
       
    });
   	 
    	  $(".js-example-basic-multiple").select2();
    	  
    	  function loadDatatable(input){
    	
     	 $('#absence_histroy th').attr('style', 'padding-left: 20px !important;padding-right:20px !important');
          
          table=$("#absence_histroy").DataTable( {
                    oLanguage: {
                           "sEmptyTable": "No data available for this selection"
                           },
                    //processing: true,   
                    lengthMenu: [[10, 25, 50, 100, -1], [10, 25, 50, 100, "All"]],    
                    
                 /*  ajax: {
                       url: '/YTMM/v1/getEmployeeAbsenceReport',
                      dataSrc: "data",
  	            	  type: "POST",
	            	  dataType: "json",
					  contentType: 'application/json',
					  data: '{"manager":["test"],"shift":["A"],"department":["RM WHSE"],"employee":["6"],"startDate":"02/19/2018","endDate":"02/20/2018"}' 

                  }, */
                  data:input,
           
                  columns: [                         
                	  { data: "id",
      					orderable: false,
      					visible:false,
      					className:"center",
      	                render: function ( data, type, row, meta ) {
      	                      if(type === 'display'){
      	                         	data='<a href="/YTMM/processLogin?absId=' + encodeURIComponent(row.id) + '" title="Click to Edit" id="edit'+meta.row+'" data-id='+row.id+'><img src="resources/img/icons/Edit_1.svg" width="22" height="22"> &nbsp;</a><a href=#  title="Click to Delete" id="delete'+meta.row+'" data-abId='+row.id+' onclick="removeAbsenceRecord(this)"><img src="resources/img/icons/TrashCan_1.svg" width="22" height="22"></a>';
      	                      }

      	                      return data;
      	             }}, 
                   { data: "id"},
                   { data: "employeeName"},
                   { data: "manager"},
                   { data: "point"},
                   { data: "department"},
                   { data: "shift"},
                   { data: "phoneNo"},
                   { data: "timeOfCall"},
                   { data: "displayAbsenceDate"},
                   { data: "absenceDays"},
                   { data: "absenceReason"},
                   { data: "sickReason"},
                   { data: "comments"},
                   { data: "callTakenBy"},
                   { data: "displayDate"},
                   { data: "extn"},
                   { data: "time"}
   
      				]
              });
          
    	  }
          
    	  function validateDate(txtDate)
			{
				var currVal = txtDate;
			    if(currVal == '')
			        return false;
			    
			  //var rxDatePattern = /^(\d{1,2})(\/|-)(\d{1,2})(\/|-)(\d{4})$/; //Declare Regex
			    var rxDatePattern = /^(\d{1,2})(\/|-)(\d{1,2})(\/|-)(\d{4}|\d{2})$/; //Declare Regex
			    var dtArray = currVal.match(rxDatePattern); // is format OK?
			    
			    if (dtArray == null) {
			    	 return false;
			    }else{
			    //Checks for mm/dd/yyyy format.
			    dtMonth = dtArray[1];
			    dtDay= dtArray[3];
			    dtYear = dtArray[5];        
			    if(dtYear.length==2){
			    	dtYear=20+dtYear;
			    }
			    if (dtMonth < 1 || dtMonth > 12) 
			    	 return false;
			    else if (dtDay < 1 || dtDay> 31) 
			    	 return false;
			    else if ((dtMonth==4 || dtMonth==6 || dtMonth==9 || dtMonth==11) && dtDay ==31) 
			    	 return false;
			    else if (dtMonth == 2) 
			    {
			        var isleap = (dtYear % 4 == 0 && (dtYear % 100 != 0 || dtYear % 400 == 0));
			        if (dtDay> 29 || (dtDay ==29 && !isleap)) 
			        	 return false;
			    }
			    }			    
			    return true;
			}

			  $(document).on('blur', "#from", function (){
				  $("label[for='from']").html("");
	    		  if($(this).val()){
					  if(validateDate($(this).val())){			    			
			        	    var date=new Date($(this).val());
			    		    var month = (1 + date.getMonth()).toString();
			                month = month.length > 1 ? month : '0' + month;
			    		    var day = date.getDate().toString();
			    		    day = day.length > 1 ? day : '0' + day;
			    		    
			    			$("#from").val( month + '/' + day + '/' + date.getFullYear());
			    		  }else{
			    			  $("label[for='from']").html("Please enter date in mm/dd/yyyy or mm/dd/yy format");
			    		  }
	    		  }	
	        	 });
			  
 			$(document).on('blur', "#to", function (){
    			$("label[for='to']").html("");  
	    		  if($(this).val()){
					  if(validateDate($(this).val())){
		        	    var date=new Date($(this).val());
		    		    var month = (1 + date.getMonth()).toString();
		                month = month.length > 1 ? month : '0' + month;
		    		    var day = date.getDate().toString();
		    		    day = day.length > 1 ? day : '0' + day;
		    		    
		    			$("#to").val( month + '/' + day + '/' + date.getFullYear());
		    		  }else{
		    			  $("label[for='to']").html("Please enter date in mm/dd/yyyy or mm/dd/yy format");
		    		  }
	    		  }	
	        	 });
    	  
		});
      
      function runReport() {
    	  
    	   var report=new Object();
    	   report.manager = $('#manager option:selected').map(function(i,v) {return this.value;	}).get();
    	   report.shift = $('#shiftAssignment option:selected').map(function(i,v) {return this.value;	}).get();
    	   report.department = $('#department option:selected').map(function(i,v) {return this.value;	}).get();
    	   report.employee = $('#employee option:selected').map(function(i,v) {return this.value;	}).get();
    	   report.startDate =  $('#from').val(); 
    	   report.endDate =  $('#to').val(); 
    	  
    	   $.ajax({ 
           	type: "POST",
           	//async:false,
           	dataType: "json",
          	url: '/YTMM/v1/getEmployeeAbsenceReport',
			contentType: 'application/json',
			data:JSON.stringify(report),
           	success: function(response){   
           		table.clear().rows.add(response.data).draw();
           	},
            error: function(XMLHttpRequest, textStatus, errorThrown) { 
				//message = "<strong> Error :</strong> " + errorThrown + "<br><strong>Message :</strong> " + XMLHttpRequest.responseText;
				message ="An error occured while processing your request, Please contact administrator";
				$("#errorMessageModal").html(message);
				$('#myModal5').modal('toggle');                    	
			},
           	failure: function(response){
           		alert("Wrongly done");
           	}
       	});    	   
    	
			
  	  }
      
      function removeAbsenceRecord(event) {
      	//console.log(event.id);
         abId=($('#'+event.id).data('abid'));
         $('#myModal').modal('toggle');	   
   	  }
      
     
      
      function deleteAbsenceRecord() {
    	console.log(abId);
    	$('#myModal').modal('toggle');
   	    $.ajax({ 
          	type: "GET",
          	dataType: "text",
         	url: '/YTMM/v1/removeEmployeeAbsenceRecord/'+abId,
          	success: function(response){ 
          		runReport();          		
          		$("#confirmMessage").html("Absence Record deleted Successfully");
          		$('#myModal2').modal('toggle'); 
          	},
          	 error: function(XMLHttpRequest, textStatus, errorThrown) { 
					//message = "<strong> Error :</strong> " + errorThrown + "<br><strong>Message :</strong> " + XMLHttpRequest.responseText;
					message ="An error occured while processing your request, Please contact administrator";
					$("#errorMessageModal").html(message);
					$('#myModal5').modal('toggle');                    	
				},
          	failure: function(response){
          		alert("Wrongly done");
          	}
      	});    	   
   	
			
 	  }
      

      
      var toInt=false;
	  var fromInt=false;
    
    function openCalendar(event){
			var id=(event.id).substring(6);
			if((id=='to')&&(!toInt)){
				toInt=true;
				 $('#to').datepicker({
		            	autoclose: true,
		            	forceParse: false,
		            	}).on('hide', function(e){
		        			if($(this).val()){
		        			$(this).valid();
		     	   		//validateDate($(this));
		    				}
		        	}); 
			}
			if((id=='from')&&(!fromInt)){
				fromInt=true;
				 $('#from').datepicker({
		            	autoclose: true,
		            	forceParse: false,
		            	}).on('hide', function(e){
		        			if($(this).val()){
		        		$(this).valid();	
		     	   		//validateDate($(this));
		    				}
		        	}); 
			}

			$('#'+id).datepicker('show');
		}
  	  
      function fnPopulateDropdown(elementId, items){
          
          if(items != null){
               $.each(items, function (i, item) {
                          $('#'+ elementId).append($('<option>', { 
                              value: item.value,
                              text : item.key 
                          }));
                      });
        }
		 }
      
      $( function() {
    		  
    	  
    	  $.ajax({ 
          	type: "GET",
          	dataType: "json",
         	url: '/YTMM/v1/getEmployeeAbsenceDropDown',
          	success: function(response){
          		$("#shiftAssignment").empty();
                  fnPopulateDropdown('shiftAssignment', response.shiftList);
                  $("#shiftAssignment").val("");
                  $("#department").empty();
                  fnPopulateDropdown('department', response.departmentList);
                  $("#department").val("");
                  $("#manager").empty();
                  fnPopulateDropdown('manager', response.managerList);
                  $("#manager").val("");
                  $("#employee").empty();
              	  fnPopulateDropdown('employee',response.employeeList);
              	  $("#employee").val("");
          	},
          	failure: function(response){
          		alert("Wrongly done");
          	}
      	});
		    	  
    });
      
       
      
		
      </script>
		<script type="text/javascript" th:inline="javascript">
			$(document).ready(function() {			
				var modelAttributeValue = [[${loginUserNameValue}]];
				$("#loginUserName").html(modelAttributeValue);
				var emp = [[${EmployeeInfo}]];
				if((2==emp[0].ROLE_ID)){
					isHR=true;
		 		   } 
				
			});
		</script>
       <!-- END JAVASCRIPTS -->
   </body>
</html>