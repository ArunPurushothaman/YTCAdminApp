<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="description" content="Program Details Form Wizard">
      <meta name="author" content="Yokohama">
      <meta name="keyword" content="YMPACT">
      <title>YTMM</title>
      <!-- Bootstrap core CSS -->
      <link href="resources/css/bootstrap.min.css" rel="stylesheet">
      <link href="resources/css/bootstrap-reset.css" rel="stylesheet">

      <!--external css-->
      <link href="resources/assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
      <!--Date Picker--> 
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-datepicker/css/datepicker.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-daterangepicker/daterangepicker-bs3.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/jquery-multi-select/css/multi-select.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-timepicker/compiled/timepicker.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-datetimepicker/css/datetimepicker.css" />
      <link rel="stylesheet" type="text/css" href="resources/css/jquery.timeentry.css" />
     
     
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.1/css/bootstrap-select.css" /> -->

   <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <!-- <link rel="stylesheet" href="/resources/demos/style.css"> 
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>-->

<!-- <style>
.btn-default {
    background-color: #fff;
    border-color: #bec3c7;
    color: #777;
}
.btn-default:hover, .btn-default:focus, .btn-default:active, .btn-default.active, .open .dropdown-toggle.btn-default {
       background-color: #fff;
    border-color: #bec3c7;
    color: #777;
}
</style> -->
     
      <!--select 2-->
      <link rel="stylesheet" type="text/css" href="resources/assets/select2/css/select2.min.css"/>
      <!--right slidebar-->
      <link href="resources/css/slidebars.css" rel="stylesheet">
       <!--Form Wizard-->
      <link rel="stylesheet" type="text/css" href="resources/css/jquery.steps.css" />
      <!-- Custom styles for this template -->
      <link href="resources/css/style.css" rel="stylesheet">
      <link href="resources/css/style-responsive.css" rel="stylesheet" />
      
      <!-- HTML5 shim and Respond.js IE8 support of HTML5 tooltips and media queries -->
      <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
      <script src="js/respond.min.js"></script>
      <![endif]-->
    
   </head>
   <body onload="">
      <section id="container" class="">
         <!--header start-->
         <header class="header dark-bg">
            <div class="sidebar-toggle-box">
               <i class="fa fa-bars"></i>
            </div>
            <!--logo start-->
            <a href="" class="logo"><img src="resources/img/yokohama-logo.svg" width="132" height="52"></a>
            <!--logo end-->
            <div class="top-nav ">
               <ul class="nav pull-right top-menu">
                  <!-- user login dropdown start-->
                  <li class="dropdown">
                     <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                     <span class="username" id="loginUserName">John Doe</span>
                     <b class="caret"></b>
                     </a>
                     <ul class="dropdown-menu extended logout">
                        <div class="log-arrow-up"></div>
                        <li><a href="logout"><i class="fa fa-key"></i> Log Out</a></li>
                     </ul>
                  </li>
                  <!-- user login dropdown end -->
               </ul>
               <center><h3 style="color:white;font-size: 20px;"></h3></center>
            </div>
         </header>
         <!--header end-->
         <!--sidebar start-->
		<aside>
			<div id="sidebar"  class="nav-collapse ">
				<!-- sidebar menu start-->
				<ul class="sidebar-menu" id="nav-accordion">
				  <li>
					  <a class="" href="report">
						  <i class="fa fa-tasks"></i>
						  <span>Report</span>
					  </a>
				  </li>
				</ul>
				<!-- sidebar menu end-->
			</div>
		</aside>
         <!--sidebar end-->
         <!--main content start-->
         <section id="main-content">
            <section class="wrapper site-min-height">
               <!-- page start-->
                <div id="tirekey-parent-div" class="row">
                  <div class="col-lg-12">
                     <!--progress bar start-->
                     <section class="panel">
                        <header class="panel-heading">
                           <h3>YTMM Employee Call/Report-Off Form</h3>
                        </header>
                        <div class="panel-body">

						<!-- START STEP 1: PROGRAM INFO -->
                           <form id="wizard-validation-form" class="cmxform" action="#">
                              <div>
                                 <section>
                                    <div class="form-group clearfix">
										<div class="col-lg-12">
                                             <div class="col-lg-4 col-md-4 col-sm-4 m-bot15 ui-widget" >
                                                <label class="control-label" for="employeeName">Employee Name</label>
                                                 <select class="form-control input-sm m-bot15 required js-example-basic-single" id="employeeName" name="employeeName">
                                             <!--    <input type="text" class="form-control" id="employeeName" name="employeeName" placeholder="Employee Name" >   -->                                             

                                             </div>
											           
										</div>
										<!-- ROW 2  BEGIN-->
										<div class="col-lg-12">
                                             <div class="col-lg-4 col-md-4 col-sm-4" >
                                                <label class="control-label" for="timeOfCal">Time of Call</label>
                                                <input type="text" class="form-control"  id="timeOfCal"
																		name="timeOfCal" placeholder="Time of Call" >
                                             </div>
											
											 <div class="col-lg-4 col-md-4 col-sm-4" >
                                                <label class="control-label" for="absenceDate">Date of Absence</label>
                                               <div class="input-group input-medium"
																	data-date-format="mm/dd/yy">
																	<input type="text" class="form-control"  id="absenceDate"
																		name="absenceDate" placeholder="Absence Date" >
																		<span class="input-group-addon"><img id="calImgabsenceDate" src="resources/img/email-img/calendar.png" width="15" onclick="openCalendar(this);"></span>																		
																		
																</div>
                                             </div>
                                             <div class="col-lg-4 col-md-4 col-sm-4" >
                                                <label class="control-label" for="absenceDays">Number of Days</label>
                                                <input id="absenceDays" name="absenceDays" type="text" class="form-control"  value="">                                                
                                             </div>
										</div>
										<!-- ROW 2 END-->
										<!-- ROW 3  BEGIN-->
										<div class="col-lg-12">
                                             <div class="col-lg-4 col-md-4 col-sm-4" >
                                             <br>
                                                <label class="control-label" for="manager">Manager/Supervisor</label>
                                                 <input id="manager" name="manager" type="text" class="form-control"  value="" disabled>
                                             </div>
											 <div class="col-lg-4 col-md-4 col-sm-4" >
											  <br>
                                                <label class="control-label" for="shiftAssignment">Shift Assignment</label>
                                                <select class="form-control input-sm m-bot15 required" id="shiftAssignment" name="shiftAssignment">
													<option>A</option>
													<option>B</option>
													<option>C</option>
													<option>D</option>
                                                </select>
                                             </div>
											 <div class="col-lg-4 col-md-4 col-sm-4" >
											  <br>
                                                <label class="control-label" for="department">Department Assigned</label>
                                                <select class="form-control input-sm m-bot15 required" id="department" name="department">
													<option>RM WHSE</option>
													<option>Mixing</option>
													<option>Cut/Cal</option>
													<option>Bead</option>
													<option>Extruding</option>
													<option>Building</option>
                                                </select>
                                             </div>
										</div>
										
										<div class="col-lg-12">
			                                  <div class="col-lg-4 col-md-4 col-sm-4 m-bot15" >
                                                <label class="control-label" for="callersPhoneNo">Caller's Phone Number</label>
                                                <input id="callersPhoneNo" name="callersPhoneNo" type="text" class="form-control"  value="">
                                             </div> 
                                             <div class="col-lg-4 col-md-4 col-sm-4" >
                                                <label class="control-label" for="reasonForAbsence">Reason For Absence</label>
                                                <select class="form-control input-sm m-bot15 required" id="reasonForAbsence" name="reasonForAbsence">
													<option>Illness</option>
													<option>Personal</option>
													<option>Accident</option>
													<option>Other</option>
                                                </select>
                                             </div>
											 <div class="col-lg-4 col-md-4 col-sm-4" >
                                                <label class="control-label" for="sickReason">If Sick, Reason?</label>
                                                <select class="form-control input-sm m-bot15 required" id="sickReason" name="sickReason">
													<option>Self</option>
													<option>Spouse</option>
													<option>Child</option>
													<option>Other</option>
                                                </select>
                                             </div>                        
										</div>
										
										</div>
										<!-- ROW 6 END-->
										<!-- ROW 7 BEGIN-->
								<div class="col-lg-12">
								<div class="col-lg-12" >
                                 <label class="control-label popovers" for="comment" >
																Comments <button data-original-title="<i class='fa fa-lightbulb-o'></i>&nbsp;&nbsp;Hot Tip" 
																data-content="If you can't see all your content, pull down the bottom-right corner of this field to expand the height." 
																data-placement="right" data-trigger="hover" 
																rows="3" data-html="true" class="btn btn-info btn-xs popovers"><strong>?</strong></button></label>
																<textarea id="comment" name="comment"
																placeholder="Add Comments"
																class="form-control m-bot15" style="height:100px"></textarea>
																</div>
                              </div>
                              <!-- ROW 7 END-->
                              <!-- ROW 8 BEGIN-->
                              <div class="col-lg-12">                                 
                                 <div class="col-lg-4 col-md-4 col-sm-4" >
                                                <label class="control-label" for="callTakenBy">Call Taken By</label>
                                                <input type="text" class="form-control"  id="callTakenBy"
																		name="callTakenBy" placeholder="Call Taken By" disabled>
                                             </div>
											
											 <div class="col-lg-4 col-md-4 col-sm-4" >
                                                <label class="control-label" for="highwayApplication">Date</label>
                                               <div class="input-group input-medium"
																	data-date-format="mm/dd/yy">
																	<input type="text" class="form-control"  id="date"
																		name="date" placeholder="Date" disabled>
																		<!-- <span class="input-group-addon"><img id="calImgdate" src="resources/img/email-img/calendar.png" width="15" onclick="openCalendar(this);"></span> -->																		
																		
																</div>
                                             </div>  
                                             <div class="col-lg-4 col-md-4 col-sm-4" >
                                                <label class="control-label" for="extn">Extension</label>
                                                <input type="text" class="form-control"  id="extn"
																		name="extn" value="6601" disabled>
                                             </div>
                                                                    
							</div>
										<!-- ROW 8 END-->	
										
										<!-- ROW 9 BEGIN-->
                              <div class="col-lg-12">  
                              <br>                               
                                <!--  <div class="col-lg-4 col-md-4 col-sm-4" >
                                                <label class="control-label" for="notification">Notification made to</label>
                                                <input type="text" class="form-control"  id="notification"
																		name="notification" placeholder="Notification made to" >
                                             </div> -->
											
											  
                                             <div class="col-lg-4 col-md-4 col-sm-4" >
                                                <label class="control-label" for="subtime">Time</label>
                                                <input type="text" class="form-control"  id="subtime"
																		name="subtime" placeholder="" disabled>
                                             </div>
                                                                    
							</div>
										<!-- ROW 9 END-->
										
										
																			
                                       <div class="col-lg-12">

                                        <div class="row">
                                            <div class="space15 clearfix"></div>
                                  <div class="form-group">

                                  
      <!-- START Submit -->
      
          <div class="clearfix"></div>

          <div class="clearfix">
                  <div id="footer-button" class="modal-footer">
                     <button id="cancel-btn" data-dismiss="modal" class="btn btn-default" type="button" onclick="javascript:cancel()">Cancel</button>
                     <a class="btn btn-success" style="text-decoration:none" id="partNo_submit"
                        href="javascript:validateBeforeSubmit('#myModal')"
                      <i
                        class="fa fa-check-circle"></i>&nbsp;&nbsp;Save Changes
                     </a>
                  </div>
				<div class="modal fade" id="myModal" tabindex="-1"
					role="dialog" aria-labelledby="myModalLabel"
					aria-hidden="true" data-backdrop="static"
					data-keyboard="false">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button id="program-submit-modal-close"
									type="button" class="close" data-dismiss="modal"
									aria-hidden="true">&times;</button>
								<h4 class="modal-title">Save/Update Confirmation</h4>
							</div>
							<div class="modal-body">
								<div class="space15">&nbsp;</div>
								<div class="text-center">Are you sure you want
									to save or update? If you still want to save or update
									, click the OK button. If you don't
									want to save or update, click the "Cancel" button below and
									your program will not be saved or updated.</div>
								<div class="space15"></div>
							</div>
							<div class="modal-footer">
								<button id="program-submit-modal-cancel"
									data-dismiss="modal" class="btn btn-default"
									type="button">Cancel</button>
								<a href="#" onclick="saveChanges();"
									onkeypress="if(event.keyCode==32||event.keyCode==13){saveChanges();};">
									<button id="program-submit-modal-ok"
										class="btn btn-info" type="button">
										<i class="fa fa-save"></i>&nbsp;&nbsp;OK
									</button>
								</a>
							</div>
						</div>
					</div>
				</div>
				<div class="modal fade" id="myModal2" tabindex="-1"
                  role="dialog" aria-labelledby="myModalLabel"
                  aria-hidden="true">
                  <div class="modal-dialog">
                     <div class="modal-content" style="border: thin solid grey">
                        <div class="modal-header">
                           <button id="program-confirmation-modal-close"
                              type="button" class="close" data-dismiss="modal"
                              aria-hidden="true">&times;</button>
                           <h4 class="modal-title">Confirmation</h4>
                        </div>
                        <div class="modal-body">
                           <!-- <div class="space15">&nbsp;</div> -->
                           <div class="text-center">
                              <span id="confirmMessage"></span>
                           </div>
                           <!-- <div class="space15"></div> -->
                        </div>
                        <div class="modal-footer">
                          <a href="javascript: cancel()" <button class="btn btn-info" type="button"
                              id="program-confirmation-modal-ok"
                              data-toggle="modal" href="#myModal2">
                              <i class="fa fa-save"></i>&nbsp;&nbsp;OK
                           </button></a>
                        </div>
                     </div>
                  </div>
                </div>  
				<div class="modal fade" id="myModal5" tabindex="-1"
					role="dialog" aria-labelledby="myModalLabel"
					aria-hidden="true" data-backdrop="static"
					data-keyboard="false">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button id="program-error-modal-close" type="button"
									class="close" data-dismiss="modal"
									aria-hidden="true">&times;</button>
								<h4 class="modal-title">Error / Warning (s)</h4>
							</div>
							<div class="modal-body">
								<!-- <div class="space15">&nbsp;</div> -->
								<div class="text-center">
									<span id="errorMessageModal"></span>
								</div>
								<!-- <div class="space15"></div> -->
							</div>
							<div class="modal-footer">
								<button class="btn btn-info" type="button"
									id="program-error-modal-ok" data-dismiss="modal">
									<i class="fa fa-save"></i>&nbsp;&nbsp;OK
								</button>
							</div>
						</div>
					</div>
				</div>
				<div class="modal fade" id="statusbox" tabindex="-1"
					role="dialog" aria-labelledby="myModalLabel"
					aria-hidden="true" data-backdrop="static"
					data-keyboard="false">
					<div class="modal-dialog">
						<div class="modal-content"
							style="border: thin solid grey">
							<div class="modal-header">
								<h4 class="modal-title">Status</h4>
							</div>
							<div class="modal-body">
								<!-- <div class="space15">&nbsp;</div> -->
								<div class="text-center">
									<span>Please wait, while your request is
										being processed.<br>
									<img src="resources/img/Processing.gif">
									</span>
								</div>
								<!-- <div class="space15"></div> -->
							</div>

						</div>
					</div>
				</div>
				<div class="modal fade" id="myModal11" tabindex="-1"
					role="dialog" aria-labelledby="myModalLabel"
					aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button id="myModal11-close" type="button"
									class="close" data-dismiss="modal"
									aria-hidden="true">&times;</button>
								<h4 class="modal-title">Cancel Changes?</h4>
							</div>
							<div class="modal-body">
								<div class="space15">&nbsp;</div>
								<div class="text-center">Are you sure you want
									to cancel the Changes? If you still want to cancel your
									changes, click the OK button. If you don't want to
									cancel your changes, click the "Cancel" button.
									</div>
								<div class="space15"></div>
							</div>
							<div class="modal-footer">
								<button data-dismiss="modal" class="btn btn-default"
									id="myModal11-cancel" type="button">Cancel</button>
								<a href="javascript: forwardToIndexPage()"
									onkeypress="if(event.keyCode==32||event.keyCode==13){forwardToIndexPage();};">
									<button class="btn btn-info"
										id="myModal11-ok" type="button">
										<i class="fa fa-save"></i>&nbsp;&nbsp;OK
									</button>
								</a>
							</div>
						</div>
					</div>
				</div>
				
				
			</div>
        </div>
       </div>
      </section>
      <!-- END Review / Confirm Section -->
      </div>
       </form>
        </div>
      </section><!-- end panel section -->
      </div>
      </div>
      <!-- page end-->
      </section><!-- end wrapper site-min-height -->
      </section><!-- end #maincontent -->
      <!--main content end-->
          
      <!--footer start-->
      <footer class="site-footer">
         <div class="text-center">
            2017 &copy; Yokohama Tire Corporation. All rights reserved. The Yokohama Rubber Company Limited
            <a href="#" class="go-top">
            <i class="fa fa-angle-up"></i>
            </a>
         </div>
      </footer>
      <!--footer end-->
      </section>
      <!-- END section id="container" FIRST section after opening body tag  -->
       
      <!-- js placed at the end of the document so the pages load faster -->
      <script src="resources/js/jquery.js"></script>
      <script src="resources/js/bootstrap.min.js"></script>
      <script src="resources/js/jquery-ui-1.9.2.custom.min.js"></script>
      <script src="resources/js/jquery-migrate-1.2.1.min.js"></script>
      <script class="include" type="text/javascript" src="resources/js/jquery.dcjqaccordion.2.7.js"></script>
      <script src="resources/js/jquery.scrollTo.min.js"></script>
      <script src="resources/js/jquery.nicescroll.js" type="text/javascript"></script>
      <script src="resources/js/respond.min.js" ></script>
      <script src="resources/js/jquery.stepy.js"></script>
      <!--right slidebar-->
      <script src="resources/js/slidebars.min.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-daterangepicker/moment.min.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-daterangepicker/daterangepicker.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-timepicker/js/bootstrap-timepicker.js"></script>
      <script type="text/javascript" src="resources/assets/jquery-multi-select/js/jquery.multi-select.js"></script>
      <script type="text/javascript" src="resources/assets/jquery-multi-select/js/jquery.quicksearch.js"></script>
      <script type="text/javascript" src="resources/assets/data-tables/jquery.dataTables.js"></script>
      <script type="text/javascript" src="resources/assets/data-tables/DT_bootstrap.js"></script>
     <!--  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.1/js/bootstrap-select.js"></script> -->
       <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
      <!--select2-->
      <script type="text/javascript" src="resources/assets/select2/js/select2.min.js"></script>
      <!--Form Validation-->
      <script src="resources/js/bootstrap-validator.min.js" type="text/javascript"></script>
      <!--Form Wizard-->
      <!--script src="js/jquery.steps.min.js" type="text/javascript"></script-->
      <script src="resources/js/jquery.validate.min.js" type="text/javascript"></script>
      
       <script src="resources/js/jquery.mask.js" type="text/javascript"></script>
       <script type="text/javascript" src="resources/js/jquery.plugin.js"></script>
       <script type="text/javascript" src="resources/js/jquery.timeentry.js"></script>
      
      <!--common script for all pages-->
      <script src="resources/js/common-scripts.js"></script>
      <!--script for this page-->

     
      <!--this page  script only-->
    <!--   <script src="resources/js/advanced-form-components.js"></script> -->
      
	

      <script type="text/javascript">
      var responseOnload=new Object();  
      var employee=new Object(); 
      var absId=null;
      
      $(document).ready(function () {    	  
    	  
    	  $(".js-example-basic-single").select2();
    	  $('#callersPhoneNo').mask('(000) 000-0000');
    	  $('#absenceDays').mask('0#');
    	  //$('#timeOfCal').mask('#0:#0');
    	  
			$('#timeOfCal').timeEntry({ampmPrefix: ' ',spinnerImage: ''});
    	  
    	  //$('#subtime').mask('00:00:00');
    		
    	  function validateName(){
    		  if(employee.managerName==null){
    			  return false;
        		}else{
        			return true;
        		}   		  
			
  		 }
    	  
    	  
    	  function validatePhone(phone_number){			
  			
	    	    phone_number = phone_number.replace(/\s+/g, "");
	    	    if(phone_number.length > 9 && phone_number.match(/^((\+[1-9]{1,4}[ \-]*)|(\([0-9]{2,3}\)[ \-]*)|([0-9]{2,4})[ \-]*)*?[0-9]{3,4}?[ \-]*[0-9]{3,4}?$/)){
	    	    	return true;
	    	    }else{
	    	    	return false;
	    	    }
	    				
		}
    	  
    	  function validateTime(time){
    		  
	    	    if(time.match(/^(\d\d):(\d\d)\s?(AM|PM)+$/)){
	    	    	return true;
	    	    }else{
	    	    	return false;
	    	    }   		  
			
  		 }
    	  
    	  function validateDate(txtDate)
			{
				var currVal = txtDate;
			    if(currVal == '')
			        return false;
			    
			  //var rxDatePattern = /^(\d{1,2})(\/|-)(\d{1,2})(\/|-)(\d{4})$/; //Declare Regex
			    var rxDatePattern = /^(\d{1,2})(\/|-)(\d{1,2})(\/|-)(\d{4}|\d{2})$/; //Declare Regex
			    var dtArray = currVal.match(rxDatePattern); // is format OK?
			    
			    if (dtArray == null) {
			    	 return false;
			    }else{
			    //Checks for mm/dd/yyyy format.
			    dtMonth = dtArray[1];
			    dtDay= dtArray[3];
			    dtYear = dtArray[5];        
			    if(dtYear.length==2){
			    	dtYear=20+dtYear;
			    }
			    if (dtMonth < 1 || dtMonth > 12) 
			    	 return false;
			    else if (dtDay < 1 || dtDay> 31) 
			    	 return false;
			    else if ((dtMonth==4 || dtMonth==6 || dtMonth==9 || dtMonth==11) && dtDay ==31) 
			    	 return false;
			    else if (dtMonth == 2) 
			    {
			        var isleap = (dtYear % 4 == 0 && (dtYear % 100 != 0 || dtYear % 400 == 0));
			        if (dtDay> 29 || (dtDay ==29 && !isleap)) 
			        	 return false;
			    }
			    }			    
			    return true;
			}
    	  
    	  	$.validator.addMethod("checkName", function (value, element) {
				return validateName();
			}, "Employee record doesn't exist in the database");
    	  	
    	  	$.validator.addMethod("checkPhone", function (value, element) {
				return validatePhone(value);
			}, "Please enter a valid Phone Number");
    	  	
    	  	$.validator.addMethod("checkTime", function (value, element) {
				return validateTime(value);
			}, "Please enter time in valid (HH:MM AM/PM )format");
    	  	
    	  	$.validator.addMethod("checkDate", function (value, element) {
				return validateDate(value);
			}, "Please enter date in mm/dd/yyyy or mm/dd/yy format");
    	  	
    	  	$.validator.addMethod("checkDays", function (value, element) {
				if(value>0){ 
					return true;
				}else{
					return false;
				}
			}, "Absent days should be greater than zero");
    	  
 			$("#wizard-validation-form").validate({
				onsubmit: false,
				rules: {
					employeeName: {
						required: true,
						checkName:true
					},
					timeOfCal: {
						required: true,
						checkTime:true
					},
					absenceDate:{
						required: true,
						checkDate:true
					},
					manager: {
						required: true
					},
					shiftAssignment: {
						required: true
					},
					department: {
						required: true
					},
					callersPhoneNo: {
						required: true,
						checkPhone:true
					},
					reasonForAbsence: {
						required: true
					},
					sickReason: {
						required: true
					},
					absenceDays: {
						required: true,
						checkDays:true
					},
					callTakenBy:{
						required: true
					},
					date: {
						required: true
					},
					extn: {
						required: true
					}
					/* notification: {
						required: true
					} */
				},
				messages: {
					required: "This field is required",
				}
			});
 			
 			
 			  $(document).on('blur', "#absenceDate", function (){
 	    		  
 	    		  if(validateDate($(this).val())){
 	        	    var date=new Date($(this).val());
 	    		    var month = (1 + date.getMonth()).toString();
 	                month = month.length > 1 ? month : '0' + month;
 	    		    var day = date.getDate().toString();
 	    		    day = day.length > 1 ? day : '0' + day;
 	    		    
 	    			$("#absenceDate").val( month + '/' + day + '/' + date.getFullYear());
 	    		  }
 	    			
 	        	 });
 			
		});
      
      $( function() {
    	 
    	/*   $.ajax({ 
          	type: "GET",
          	dataType: "json",
         	url: '/YTMM/v1/getAllEmployeeDetails',
          	success: function(response){
          		 var availableTags = response;
           	    $( "#employeeName" ).autocomplete({
           	      source: availableTags
           	    });
           	
          	},
          	failure: function(response){
          		alert("Wrongly done");
          	}
      	}); */
    	  
    	  function loadAbsentDetails(absId){
    		  //console.log(absId);
    		  $.ajax({ 
    	          	type: "GET",
    	          	dataType: "json",
    	         	url: '/YTMM/v1/getEmployeeAbsenceRecord/'+absId,
    	          	success: function(response){ 
    	          		$("#shiftAssignment").val(response.shift);
    	          	  	$("#department").val(response.department);
    	          	 	$("#reasonForAbsence").val(response.absenceReason);
    	          	 	$("#sickReason").val(response.sickReason);
    	          	 	$('#employeeName').val(response.employeeName);
    	          	    $('#employeeName').prop('disabled', true);
    	          	 	$('#timeOfCal').val(response.timeOfCall);
    	          	 	$('#absenceDate').val(response.absenceDate);
    	          	 	$('#absenceDays').val(response.absenceDays);
    	          	 	$('#manager').val(response.manager);
    	          	 	$('#callersPhoneNo').val(response.phoneNo);
    	          	 	$('#comment').val(response.comments);

    	          	},
    	          	failure: function(response){
    	          		alert("Wrongly done");
    	          	}
    	      	});
    		  
    	  }
    	  
    	  $.ajax({ 
            	type: "GET",
            	dataType: "json",
           		url: '/YTMM/v1/getEmployeeAbsenceDropDown',
            	success: function(response){
            		$("#shiftAssignment").empty();
                    fnPopulateDropdown('shiftAssignment', response.shiftList);
                    $("#shiftAssignment").val("");
                    $("#department").empty();
                    fnPopulateDropdown('department', response.departmentList);
                    $("#department").val("");
                    $("#reasonForAbsence").empty();
                    fnPopulateDropdown('reasonForAbsence', response.absenceReasonList);
                    $("#reasonForAbsence").val("");
                    $("#sickReason").empty();
                    fnPopulateDropdown('sickReason', response.sickReasonList);
                    $("#sickReason").val("");
                    $("#employeeName").empty();
                	fnPopulateDropdown('employeeName',response.employeeList);
                	$("#employeeName").val("");
                    
                 var queryDict = {};
       	      	 window.location.search.substr(1).split("&").forEach(
       	       	 function(item) {
       	         queryDict[item.split("=")[0]] = item.split("=")[1]
       	         })
       	         absId=queryDict["absId"];
       	      	
       	      	 if(absId!=null){
       	      		 
       	      		 loadAbsentDetails(absId);
       	      	 }
       	      	 
            	},
            	failure: function(response){
            		alert("Wrongly done");
            	}
        	});
    	  
    	  $(document).on('change', "#employeeName", function (){    
	    	  $.ajax({ 
	            	type: "POST",
	            	//async:false,
	            	dataType: "json",
	           		url: '/YTMM/v1/getAbsentEmployeeDetail',
					contentType: 'application/json',
					data: JSON.stringify($('#employeeName').val()),
	            	success: function(response){   
	            		employee=response;
	   	            	$('#manager').val(response.managerName);
	            		$('#callersPhoneNo').val(response.primaryPhone);
	            		$('#department').val(response.departmentId); 
	            		//$('#shiftAssignment').val(response.shiftId);
	            		$('#employeeName').valid();
	            	},
	            	failure: function(response){
	            		alert("Wrongly done");
	            	}
	        	}); 
    	  }); 
		 
		 /*  $(document).on('blur', "#employeeName", function (){
				
				$.ajax({ 
	            	type: "GET",
	            	dataType: "text",
	           		url: '/YTMM/v1/getEmployeeName/'+$('#employeeName').val(),
	            	success: function(response){
	            		$('#employeeName').val(response);
	            		if(response=="Not Available"){
	            			alert("Employee record doesn't exists in the database. Contact application administrator");
	            		}
	            	},
	            	failure: function(response){
	            		alert("Wrongly done");
	            	}
	        	});
		 }); */
    	  
    	  
    	   	  
    	  
    	  
    	  var nowTemp = new Date();
    	  
		  var now = new Date(nowTemp.getFullYear(), nowTemp.getMonth(), nowTemp.getDate(), 0, 0, 0, 0);
		  $('#absenceDate').val(getDate(now));
		  $('#date').val(getDate(now));
		  $('#timeOfCal').val(timeNow());
		  $('#subtime').val(timeNow());		  
		  
    	  });
      
        var toInt=false;
		var fromInt=false;
      
		function openCalendar(event){
			var id=(event.id).substring(6);
			if((id=='absenceDate')&&(!toInt)){
				toInt=true;
				 $('#absenceDate').datepicker({
		            	autoclose: true,
		            	forceParse: false,
		            	}).on('hide', function(e){
		        			if($(this).val()){
		        			$(this).valid();
		    				}
		        	}); 
			}
			if((id=='date')&&(!fromInt)){
				fromInt=true;
				 $('#date').datepicker({
		            	autoclose: true,
		            	forceParse: false,
		            	}).on('hide', function(e){
		        			if($(this).val()){
		        		$(this).valid();	
		    				}
		        	}); 
			}

			$('#'+id).datepicker('show');
		}
      
		function getDate(date){
			var today = new Date(date);
			var dd = today.getUTCDate();
			var mm = today.getUTCMonth()+1; //January is 0!
			var yyyy = today.getUTCFullYear();

			if(dd<10) {
			    dd='0'+dd
			} 

			if(mm<10) {
			    mm='0'+mm
			}  

			today = mm+'/'+dd+'/'+yyyy;
			return today;
		}	
		
		function timeNow() {
			   /* var d = new Date(),
			      h = (d.getHours()<10?'0':'') + d.getHours(),
			      m = (d.getMinutes()<10?'0':'') + d.getMinutes();
			      s = (d.getSeconds()<10?'0':'') + d.getSeconds();
			  time = h + ':' + m;  */
			  
			 /*  var time = new Date();

			  time = time.toLocaleString('en-US', { hour:'numeric',minute:'numeric', hour12:true }); */
			  var date = new Date()
			  var hours = date.getHours();
			  var minutes = date.getMinutes();
			  var ampm = hours >= 12 ? 'PM' : 'AM';
			  hours = hours % 12;
			  hours = hours ? hours : 12; // the hour '0' should be '12'
			  hours = hours < 10 ? '0'+hours : hours;
			  minutes = minutes < 10 ? '0'+minutes : minutes;
			  var time = hours + ':' + minutes + ' ' + ampm;
			  
			  return time;
			}
		
		
		
		function validateBeforeSubmit(modalId){
				
				if($("#wizard-validation-form").valid()){
					$(modalId).modal('toggle');
				}
				else{
					$("#errorMessageModal").html("Please correct the highlighted errors.");
					$('#myModal5').modal('toggle');
				}
			
		}  
		
		function saveChanges(){
			prepareDataForSubmit();
			$('#myModal').modal('toggle');
			message = 'Employee call-in record has been saved successfully.';
			fnCallService(message);                       
		}
		
		
		 function cancel(){
             window.location.href = "processLogin";

         }
		
     	function prepareDataForSubmit(){
			responseOnload.employeeName= $('#employeeName').val();
			responseOnload.timeOfCall = $('#timeOfCal').val();
			//responseOnload.absenceDate = $.datepicker.parseDate( "mm/dd/yy", $('#absenceDate').val()); 
			responseOnload.absenceDate = $('#absenceDate').val();
			responseOnload.absenceDays = parseInt($('#absenceDays').val());
			responseOnload.manager = $('#manager').val();
			responseOnload.shift = $('#shiftAssignment').val();
			responseOnload.department = $('#department').val();
			responseOnload.phoneNo = $('#callersPhoneNo').val();
			responseOnload.absenceReason = $('#reasonForAbsence').val();
			responseOnload.sickReason = $('#sickReason').val();
			//responseOnload.point = $('#point').val();
			responseOnload.comments = $('#comment').val();
			responseOnload.callTakenBy = $('#callTakenBy').val();
			//responseOnload.date =$.datepicker.parseDate( "mm/dd/yy", $('#date').val()); 
			responseOnload.date = $('#date').val(); 
			responseOnload.extn = $('#extn').val();
			//responseOnload.notificationTo = $('#notification').val();
			responseOnload.time = $('#subtime').val();
     	}
     	
		function fnCallService(message){
			/*Service call to save the data.*/				
			$('#statusbox').modal('show');
			var url="/YTMM/v1/saveEmployeeAbsenceDetail";
			if(absId!=null){
				url="/YTMM/v1/updateEmployeeAbsenceDetail";
				responseOnload.id=absId;
				message = 'Employee call-in record has been updated successfully.';
			}
						
		    $.ajax({
				type: "POST",
				async:false,
				url: url,
				dataType: 'json',
				contentType: 'application/json',
				data: JSON.stringify(responseOnload),
				success: function (response) {
					$('#statusbox').modal('hide');
		            if (response != null) {
		            	responseOnload = response.data;
		            	if(null==responseOnload.manager){
		            		$("#confirmMessage").html(message+"<BR>The supervisor doesn't have an Email address, hence email will not be triggered to supervisor.");
		            	}else{
		            		$("#confirmMessage").html(message);
		            	}
						
						$('#myModal2').modal('toggle'); 
		            	
		            }else {
						$("#errorMessageModal").html("Issue while saving the data. Please try again after sometime.!!");
						$('#myModal5').modal('toggle');
		            }
				},
				failure: function(response){
					$("#errorMessageModal").html("Issue while saving the data. Please try again after sometime.!!");
					$('#myModal5').modal('toggle');
				},
		        error: function(XMLHttpRequest, textStatus, errorThrown) { 
		         	$('#statusbox').modal('hide');
					message = "<strong> Error :</strong> " + errorThrown + "<br><strong>Message :</strong> " + XMLHttpRequest.responseText;
					$("#errorMessageModal").html(message);
					$('#myModal5').modal('toggle');                    	
				} 
		    });
		}
		
		 function fnPopulateDropdown(elementId, items){
             
             if(items != null){
                  $.each(items, function (i, item) {
                             $('#'+ elementId).append($('<option>', { 
                                 value: item.value,
                                 text : item.key 
                             }));
                         });
           }
		 }
		
      </script>
		<script type="text/javascript" th:inline="javascript">
			$(document).ready(function() {			
				var modelAttributeValue = [[${loginUserNameValue}]];
				$("#loginUserName").html(modelAttributeValue);
				var emp = [[${EmployeeInfo}]];
				 /* if((2==emp[0].ROLE_ID)){		 			
		 			  $('#point').prop('disabled', false);
		 		   } */
				$("#callTakenBy").val(emp[0].fullName);				
			});
		</script>
       <!-- END JAVASCRIPTS -->
   </body>
</html>